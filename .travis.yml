language: ruby
rvm:
- 2.5.3
- 2.6.0
- 2.6.3
- 2.6.5
- 2.7.0
branches:
  only:
  - master
  - browserstack
before_script:
  - RUBY_VERSION=/bin/bash rvm current
  - sed -i -E 's/system\((.*?)\)/""/g' /home/travis/.rvm/gems/$RUBY_VERSION/gems/browserstack-local-1.3.0/lib/browserstack/local.rb
env:
#   - CONFIG_FILE=osx/catalina/catalina_chrome_41.config.yml
#   - CONFIG_FILE=osx/catalina/catalina_chrome_59.config.yml
#   - CONFIG_FILE=osx/catalina/catalina_chrome_81.config.yml
#   - CONFIG_FILE=osx/catalina/catalina_firefox_11.config.yml
#   - CONFIG_FILE=osx/catalina/catalina_firefox_68esr.config.yml
#   - CONFIG_FILE=osx/catalina/catalina_firefox_75.config.yml
#   - CONFIG_FILE=osx/catalina/catalina_safari_13.config.yml
#   - CONFIG_FILE=osx/elcapitan/elcapitan_chrome_14.config.yml
#   - CONFIG_FILE=osx/elcapitan/elcapitan_chrome_81.config.yml
#   - CONFIG_FILE=osx/elcapitan/elcapitan_firefox_7.config.yml
#   - CONFIG_FILE=osx/elcapitan/elcapitan_firefox_75.config.yml
#   - CONFIG_FILE=osx/elcapitan/elcapitan_safari_9-1.config.yml
#   - CONFIG_FILE=osx/snowleopard/snowleopard_chrome_14.config.yml
#   - CONFIG_FILE=osx/snowleopard/snowleopard_chrome_35.config.yml
#   - CONFIG_FILE=osx/snowleopard/snowleopard_chrome_49.config.yml
#   - CONFIG_FILE=osx/snowleopard/snowleopard_firefox_7.config.yml
#   - CONFIG_FILE=osx/snowleopard/snowleopard_firefox_38esr.config.yml
#   - CONFIG_FILE=osx/snowleopard/snowleopard_firefox_42.config.yml
#   - CONFIG_FILE=osx/snowleopard/snowleopard_safari_5-1.config.yml
#   - CONFIG_FILE=windows/win10/win10_chrome_37.config.yml
#   - CONFIG_FILE=windows/win10/win10_chrome_59.config.yml
#   - CONFIG_FILE=windows/win10/win10_firefox_32.config.yml
#   - CONFIG_FILE=windows/win10/win10_firefox_68esr.config.yml
  - CONFIG_FILE=windows/win10/win10_firefox_75.config.yml
#   - CONFIG_FILE=windows/win10/win10_edge_81.config.yml
#   - CONFIG_FILE=windows/win10/win10_ie_11.config.yml
#   - CONFIG_FILE=windows/win8/win8_chrome_22.config.yml
#   - CONFIG_FILE=windows/win8/win8_chrome_81.config.yml
#   - CONFIG_FILE=windows/win8/win8_firefox_32.config.yml
#   - CONFIG_FILE=windows/win8/win8_firefox_75.config.yml
#   - CONFIG_FILE=windows/win8/win8_edge_81.config.yml
#   - CONFIG_FILE=windows/win8/win8_ie_10.config.yml
#   - CONFIG_FILE=windows/xp/xp_chrome_14.config.yml
#   - CONFIG_FILE=windows/xp/xp_chrome_28.config.yml
#   - CONFIG_FILE=windows/xp/xp_chrome_43.config.yml
#   - CONFIG_FILE=windows/xp/xp_firefox_16.config.yml
#   - CONFIG_FILE=windows/xp/xp_firefox_26.config.yml
#   - CONFIG_FILE=windows/xp/xp_firefox_45.config.yml
#   - CONFIG_FILE=windows/xp/xp_ie_7.config.yml
# jobs:
#   include:
#     - name: "Full Test Suite 2.5.3"
#       rvm: 2.5.3
#       env: CONFIG_FILE=windows/win10/win10_chrome_81.config.yml
#       script: bundle exec rspec
#     - name: "Full Test Suite 2.6.0"
#       rvm: 2.6.0
#       env: CONFIG_FILE=windows/win10/win10_chrome_81.config.yml
#       script: bundle exec rspec
#     - name: "Full Test Suite 2.6.3"
#       rvm: 2.6.3
#       env: CONFIG_FILE=windows/win10/win10_chrome_81.config.yml
#       script: bundle exec rspec
#     - name: "Full Test Suite 2.6.5"
#       rvm: 2.6.5
#       env: CONFIG_FILE=windows/win10/win10_chrome_81.config.yml
#       script: bundle exec rspec
#     - name: "Full Test Suite 2.7.0"
#       rvm: 2.7.0
#       env: CONFIG_FILE=windows/win10/win10_chrome_81.config.yml
#       script: bundle exec rspec
script:
  - bundle exec rspec --tag run_on_browserstack
addons:
  apt:
    packages:
    - libsqlite3-dev
    - build-essential
    - patch
    - ruby-dev
    - zlib1g-dev
    - liblzma-dev
    - libcurl4-openssl-dev
  browserstack:
    username:
      secure: "nF7aIObLSOINsQXbd6QAhv09sHz6yH1CjsoysLPdRy/398xMtJMXBxIOiLs22OE1icX30s15PQ5P81rJnF90KiPL/tCBCLdCjcB1rZIGsVGrIpnrnnWaQCUpiKHotUlsbg7HTjGslAUU+pLTh4fHciQvInE1fLW1vTAqcqPQ+n7t5Mlpxg7KydOtPQTc8I5Ovz7GIhQ9uK3QZub5L1xiHO4zeisG75lhLimSMjtlfgXJJXB2hifEgull6D4RIcqjGJTSSp6zwaDfAPjXKxe2SjvFW4iwdGYyjIJTmU9Srqtg35sMFq+AcxtG9eBazsK0xSndWlky7JmkpMwahwYtUCpg7T2AFJoyYiYCG4CdBKWHTPgezg3nO3CogC0evTpG/QWkYeR0/iLPU2IgoD/SMmoHxBU88oHL+7iSFUOWMFH1mlKqMwdco+ugIEtJkzhMNkMQXXGrtDhbFy7jFpbqIz7WY6aI42qzIXpIeLyd7GGMJTwvT0TCtFIqbKx9XPfIxLJo/RrVAsYBWCSyiP14CVop3YmVYho63EDRs+5dqSYsEtas3TZ5KHvgFJXOzepbx6OGSUDb+FT2q4spc3je+IvU5Qj6g5TyRu5bwqN/Sg37x3MZA3j8bT4NTh9G85kL/QioWXWtQXr6AtKyzpSF4rrl0LwUhV4/ynxKOvac7rQ="
    access_key:
      secure: "bokJi4ck7xoynCZPvqKHPHfBP6DdymQLQQpt8L6sWrtGq+40XmhIk6mAkXpYpbNK8krTiyhgXTyA1NW+wGpz0i0CZVbALwsHGB1tlkCNgssxvQrK3Nt6FO7uyzziE0WThW0TApwTj8XWmWCdwVDhJgNYX+Ve7/jYYj/+myF0pM+DlMKeD3e2x3Xv1NJd7bX8uVO69Cs9rjTUzZCI24uIJUUKT9+HLhsy3r223jusG0B65EuQfbqaibQDdVEMuAwMWroWXC/TXEH0rgU7lPo6qKROUZkTzikl9c30RAN7DCvVDOgRkrGOOTY4pSTlsav85x1EA5BM/3z0abzG61BP3fZx/2XR0OvZ5J81RlEfyY+VF/8JvIhRIfCTbrwJp+G+8anpkeLy5fsqPSmtMnAoruMOp1nPCnxAaxLSe73weG8tjIFz8MI0c1Z/1cpqei+ywff4sXw8SAWV1dYbxJbyAV/elnKPxm4yhbWdtT+tcQY5XYxOemfCvn98c3bNwd7/9MSN5vd1swY6CIMk3DNXyCcQeh/Co/QmHwwrayCplt3b1uUWMZJCI49vnDIKGMFerfhPvqPIk6qqsUoD8ZC2SYEf/QqEkIxqbJeZYa2PKoPlqqz2NuXgE2RTSKLs/0YJlu+y9oJaNiAz1dVQmS4Cr6YGNgiVQ6VGAPkStwg/2/U="